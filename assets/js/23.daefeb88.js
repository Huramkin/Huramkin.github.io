(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{296:function(s,a,e){"use strict";e.r(a);var t=e(5),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("使用官网脚本和docker两种方式部署caddy服务")]),s._v(" "),e("h2",{attrs:{id:"使用脚本安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用脚本安装"}},[s._v("#")]),s._v(" 使用脚本安装")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl https://getcaddy.com | bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("运行直接输入 "),e("code",[s._v("caddy")]),s._v(" 即可")]),s._v(" "),e("p",[s._v("可以使用screen 或者 hop,upstart,systemd,supervisor等使其后台运行")]),s._v(" "),e("h2",{attrs:{id:"使用docker部署caddy服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用docker部署caddy服务"}},[s._v("#")]),s._v(" 使用docker部署caddy服务")]),s._v(" "),e("h3",{attrs:{id:"docker-compose-yml-文件配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml-文件配置"}},[s._v("#")]),s._v(" docker-compose.yml 文件配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('version: \'2\'\n\nservices:\n  caddy:\n    container_name: caddy\n    image: abiosoft/caddy\n    volumes:\n      - "/etc/caddy/certs:/etc/caddycerts"\n      - "/etc/caddy/Caddyfile:/etc/Caddyfile"\n      - "/home:/home"\n    ports:\n      - 80:80\n      - 443:443\n    network_mode: "host"\n    restart: always\n    environment:\n      CADDYPATH: /etc/caddycerts\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("编写"),e("code",[s._v("docker-compose.yml")]),s._v("文件,把宿主机上的"),e("code",[s._v("Caddyfile")]),s._v("挂载到"),e("code",[s._v("Caddy Server")]),s._v("的容器,同时挂载用来存放SSL证书的目录,让容器直接使用宿主机器的网络,把"),e("code",[s._v("/home")]),s._v("目录映射到"),e("code",[s._v("Caddy Server")]),s._v("中可以直接host站点")]),s._v(" "),e("h3",{attrs:{id:"运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[s._v("#")]),s._v(" 运行")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker-compose up -d\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"caddyfile配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#caddyfile配置"}},[s._v("#")]),s._v(" Caddyfile配置")]),s._v(" "),e("h3",{attrs:{id:"反向代理配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#反向代理配置"}},[s._v("#")]),s._v(" 反向代理配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" https://www.lowol.top {\n gzip\n tls email@email.email\n basicauth / user passwd\n proxy / https://huramkin.me\n }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"使用本地文件建立网页的配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用本地文件建立网页的配置"}},[s._v("#")]),s._v(" 使用本地文件建立网页的配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" huramkin.me www.huramkin.me {\n  tls /root/xxx.crt /root/xxx.key\n  root /home/huramkin\n  index index.html index.htm\n  gzip\n  log /home/logs/huramkin.log\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),e("blockquote",[e("p",[s._v("https://hub.docker.com/r/abiosoft/caddy/\nhttps://caddyserver.com/tutorial\nhttps://caddyserver.com/download\nhttps://dengxiaolong.com/caddy/zh/\nhttps://dengxiaolong.com/caddy/zh/caddyfile.html\nhttps://www.moerats.com/archives/404/\nhttps://xiaozhou.net/experience-of-caddy-server-2017-11-29.html\nhttps://doubibackup.com/l-en8vwt-2.html https://archive.fo/qEUc7\nhttps://intl.huramkin.com/2017/09/01/Caddy1/")])])])}),[],!1,null,null,null);a.default=n.exports}}]);